<!DOCTYPE html>

<head>

	<!-- Basic Page Needs
		================================================== -->
	<title>PeterParker</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- CSS
		================================================== -->
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/main-color.css" id="colors">

</head>

<body>

	<!-- Wrapper -->
	<div id="wrapper">

		<!-- Header Container
		================================================== -->
		<header id="header-container" class="fixed fullwidth dashboard">

			<!-- Header -->
			<div id="header" class="not-sticky">
				<div class="container">

					<!-- Left Side Content -->
					<div class="left-side">

						<!-- Logo -->
						<div id="logo">
							<a href="dashboard-main.html"><img src="images/PeterParker_Logo2.png" alt=""></a>
							<a href="dashboard-main.html" class="dashboard-logo"><img src="images/PeterParker_Logo.png"
									alt=""></a>
						</div>

						<!-- Mobile Navigation -->
						<div class="mmenu-trigger">
							<button class="hamburger hamburger--collapse" type="button">
								<span class="hamburger-box">
									<span class="hamburger-inner"></span>
								</span>
							</button>
						</div>

						<!-- Main Navigation -->
						<!-- <nav id="navigation" class="style-1">
							<ul id="responsive">
								<li><a href="#">首頁</a></li>
							</ul>
						</nav>
						<div class="clearfix"></div> -->
						<!-- Main Navigation / End -->

					</div>
					<!-- Left Side Content / End -->

					<!-- Right Side Content 導覽列-右  -->
					<div class="right-side">
						<!-- Header Widget -->
						<div class="header-widget">

							<!-- User Menu -->
							<div class="user-menu">
								<div class="user-name">
									<span>
										<img id="profile-avatar" src="images/dashboard-avatar.jpg" />
									</span>
									帳號中心
								</div>
								<ul>
									<li><a href="javascript:void(0)" id="my-account-link"><i class="sl sl-icon-user"></i> 我的帳號</a></li>
									<li><a href="javascript:void(0)" onclick="logout()"><i class="sl sl-icon-power"></i> 登出</a></li>
								</ul>
							</div>

						</div>
						<!-- Header Widget / End -->
					</div>
					<!-- Right Side Content / End -->

				</div>
			</div>
			<!-- Header / End -->

		</header>
		<div class="clearfix"></div>
		<!-- Header Container / End -->


		<!-- Dashboard 側邊欄-->
		<div id="dashboard">

			<!-- Navigation
			================================================== -->

			<!-- Responsive Navigation Trigger -->
			<a href="#" class="dashboard-responsive-nav-trigger"><i class="fa fa-reorder"></i> 儀表板欄位</a>

			<div class="dashboard-nav">
				<div class="dashboard-nav-inner">

					<ul data-submenu-title="主要">
						<li><a href="dashboard-main.html"><i class="sl sl-icon-settings"></i> 儀表板</a></li>
					</ul>

					<ul data-submenu-title="資料查詢">
						<li><a><i class="sl sl-icon-layers"></i> 會員資料</a>
							<ul>
								<li><a href="dashboard-users.html"> 一般會員 </a></li>
								<li><a href="dashboard-owners.html"> 業主 </a></li>
							</ul>
						</li>
						<li><a href="dashboard-order.html"><i class="sl sl-icon-star"></i> 訂單查詢</a></li>
					</ul>

					<!-- <ul data-submenu-title="最新消息">
						<li><a href="#"><i class="sl sl-icon-plus"></i> 最新消息</a></li>
					</ul> -->

					<ul data-submenu-title="帳號">
						<li><a href="dashboard-admin.html"><i class="sl sl-icon-user"></i> 管理員總覽</a></li>
						<li><a href="javascript:void(0)" onclick="logout()"><i class="sl sl-icon-power"></i> 登出</a></li>
					</ul>

				</div>
			</div>
			<!-- Navigation / End -->

			<!-- Content
			================================================== -->
			<div class="dashboard-content">

				<!-- Titlebar -->
				<div id="titlebar">
					<div class="row">
						<div class="col-md-12">
							<h2>歡迎回來！</h2>
							<!-- Breadcrumbs -->
							<nav id="breadcrumbs">
								<ul>
									<li><a href="#">首頁</a></li>
									<li>儀表板</li>
								</ul>
							</nav>
						</div>
					</div>
				</div>

				<!-- Content -->
				<div class="row">
					<!-- 使用者數量 -->
					<div class="col-lg-3 col-md-6">
						<div class="dashboard-stat color-1">
							<div class="dashboard-stat-content">
								<h4></h4> <span>Total Users</span>
							</div>
							<div class="dashboard-stat-icon"><i class="im im-icon-Map2"></i></div>
						</div>
					</div>

					<!-- 業主數量 -->
					<div class="col-lg-3 col-md-6">
						<div class="dashboard-stat color-2">
							<div class="dashboard-stat-content">
								<h4></h4> <span>Total Owners</span>
							</div>
							<div class="dashboard-stat-icon"><i class="im im-icon-Line-Chart"></i></div>
						</div>
					</div>

					<!-- 訂單數量 -->
					<div class="col-lg-3 col-md-6">
						<div class="dashboard-stat color-3">
							<div class="dashboard-stat-content">
								<h4></h4> <span>Total Orders</span>
							</div>
							<div class="dashboard-stat-icon"><i class="im im-icon-Add-UserStar"></i></div>
						</div>
					</div>

					<!-- 其他數據（可更改為您需要的統計項目） -->
					<div class="col-lg-3 col-md-6">
						<div class="dashboard-stat color-4">
							<div class="dashboard-stat-content">
								<h4></h4> <span>Other Data</span>
							</div>
							<div class="dashboard-stat-icon"><i class="im im-icon-Heart"></i></div>
						</div>
					</div>
				</div>

					<!-- Copyrights -->
					<div class="col-md-12">
						<div class="copyrights">© 2024 PeterParker. All Rights Reserved.</div>
					</div>
				</div>

			</div>
			<!-- Content / End -->


		</div>
		<!-- Dashboard / End -->


	</div>
	<!-- Wrapper / End -->


	<!-- Scripts
		================================================== -->
	<script type="text/javascript" src="scripts/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="scripts/jquery-migrate-3.3.2.min.js"></script>
	<script type="text/javascript" src="scripts/mmenu.min.js"></script>
	<script type="text/javascript" src="scripts/chosen.min.js"></script>
	<script type="text/javascript" src="scripts/slick.min.js"></script>
	<script type="text/javascript" src="scripts/rangeslider.min.js"></script>
	<script type="text/javascript" src="scripts/magnific-popup.min.js"></script>
	<script type="text/javascript" src="scripts/waypoints.min.js"></script>
	<script type="text/javascript" src="scripts/counterup.min.js"></script>
	<script type="text/javascript" src="scripts/jquery-ui.min.js"></script>
	<script type="text/javascript" src="scripts/tooltips.min.js"></script>
	<script type="text/javascript" src="scripts/custom.js"></script>
	<script type="text/javascript" src="scripts/loadProfileAvatar.js"></script>
	<script src="scripts/setMyAccountLink.js"></script>
	<script src="scripts/logout.js"></script>


	<script>
		document.addEventListener('DOMContentLoaded', function () {

			console.log("JWT Token:", localStorage.getItem('token'));
		
			// 取得統計數據
			fetch(`http://localhost:8081/api/statistics/counts?cacheBust=${Date.now()}`, {
				method: 'GET',
				headers: {
					'Cache-Control': 'no-store',
					'Authorization': `Bearer ${localStorage.getItem('token')}`
				}
			})
				.then(response => response.json())
				.then(data => {
					console.log('數據內容:', data); // 檢查數據內容
					document.querySelector('.dashboard-stat.color-1 h4').innerText = data.userCount || 0;
					document.querySelector('.dashboard-stat.color-2 h4').innerText = data.ownerCount || 0;
					document.querySelector('.dashboard-stat.color-3 h4').innerText = data.orderCount || 0;
				})
				.catch(error => console.error('無法取得統計數據:', error));
		});

	</script>


</body>

</html>